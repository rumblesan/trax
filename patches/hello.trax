
portmidi = require "portmidi"

livecode = require "./patches/livecode"
reload = livecode.reload


Seq = reload "./patches/seq"



portmidi.initialize()
outa = portmidi.getdeviceinfo(2)
stream = outa:openoutput()


s = Seq.new({ 1,2,3,4 }, 0.5)

s:map(function(v) return v * 8 end)

out = s:next(0, 0.5)

for k, v in ipairs(s:next(1.5, 0.1)) do
  print(v)
end

Trax:seq(0, function (pBeat, cBeat)
  bDiff = cBeat - pBeat
  print(cBeat, bDiff)
end)

Trax:seq(0)
